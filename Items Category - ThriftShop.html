<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Items Category - ThriftShop</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #d3d3d3;
    }

    /* Navbar */
    .navbar {
      background-color: #555;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 30px;
    }

    .navbar-left,
    .navbar-right {
      display: flex;
      align-items: center;
    }

    .navbar-left a {
      color: rgb(216, 203, 203);
      text-decoration: none;
      margin-right: 25px;
      font-size: 16px;
      transition: color 0.3s;
    }

    .navbar-left a:hover {
      color: white;
    }

    .logo-box {
      background-color: white;
      padding: 6px;
      margin-right: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
    }

    .logo-box img {
      height: 40px;
      width: 40px;
      object-fit: contain;
    }

    .search-box input {
      padding: 6px 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
      width: 200px;
    }

    .recent-searches {
      padding: 10px 30px;
      font-size: 14px;
      color: #333;
    }

    .recent-searches span {
      display: inline-block;
      margin-right: 10px;
      background-color: #eee;
      padding: 5px 10px;
      border-radius: 5px;
    }

    /* Header */
    .header {
      text-align: center;
      padding: 40px 20px 10px;
    }

    .header h1 {
      margin-bottom: 10px;
    }

    .header p {
      color: #000000;
    }

    /* Product Category Cards */
    .category-container {
      display: grid;
      grid-template-columns: repeat(3, 265px);
      gap: 25px;
      padding: 20px 40px;
      justify-content: center;
    }

    .category-card {
      background-color: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
      position: relative;
      text-align: center;
      padding: 15px;
    }

    .category-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 12px rgba(0,0,0,0.15);
    }

    .category-image {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 6px;
      margin-bottom: 10px;
    }

    .category-title {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 5px;
    }

    .category-price {
      font-size: 14px;
      color: #333;
      margin-bottom: 5px;
    }

    .voucher {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: red;
      color: white;
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 4px;
    }

    .sold-status {
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: #333;
      color: white;
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 4px;
    }

    .quantity-sold {
      font-size: 12px;
      color: #666;
      margin-bottom: 10px;
    }

    .button-group {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }

    .button-group button {
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .buy-btn {
      background-color: #333;
      color: white;
    }

    .add-btn {
      background-color: #666;
      color: white;
    }

    .restock-btn {
      background-color: #28a745;
      color: white;
      display: none;
    }

    .buy-btn:hover, .add-btn:hover, .restock-btn:hover {
      opacity: 0.85;
      transform: scale(1.05);
    }

    .buy-btn:disabled, .add-btn:disabled {
      background-color: #999;
      cursor: not-allowed;
      transform: none;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <div class="navbar">
    <div class="navbar-left">
      <div class="logo-box">
        <img src="img.png" alt="Logo">
      </div>
      <a href="shop.html">Shop</a>
      <a href="subscribe.html">Subscribe</a>
      <a href="about.html">About</a>
    </div>
    <div class="navbar-right">
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search product" oninput="trackSearch(this.value)">
      </div>
    </div>
  </div>

  <!-- Header -->
  <div class="header">
    <h1>Items Category</h1>
    <p>Check out our best picks with great discounts!</p>
  </div>

  <!-- Product Category Section -->
  <div class="category-container">
    <div class="category-card">
      <div class="voucher">20% OFF</div>
      <div class="sold-status">In Stock</div>
      <img src="ch.webp" alt="Item 1" class="category-image" />
      <div class="category-title">Carrhart</div>
      <div class="category-price">$27</div>
      <div class="quantity-sold">Sold: 0</div>
      <div class="button-group">
        <button class="buy-btn" onclick="handlePurchase(this, 'Carrhart')">Buy</button>
        <button class="add-btn" onclick="window.location.href='shopping basket.html'">Add to Cart</button>
        <button class="restock-btn" onclick="handleRestock('Carrhart')">Restock</button>
      </div>
    </div>

    <div class="category-card">
      <div class="voucher">20% OFF</div>
      <div class="sold-status">In Stock</div>
      <img src="ChromeH.jpg" alt="Item 2" class="category-image" />
      <div class="category-title">Chromehearts</div>
      <div class="category-price">$21</div>
      <div class="quantity-sold">Sold: 0</div>
      <div class="button-group">
        <button class="buy-btn" onclick="handlePurchase(this, 'Chromehearts')">Buy</button>
        <button class="add-btn" onclick="window.location.href='shopping basket.html'">Add to Cart</button>
        <button class="restock-btn" onclick="handleRestock('Chromehearts')">Restock</button>
      </div>
    </div>

    <div class="category-card">
      <div class="voucher">20% OFF</div>
      <div class="sold-status">In Stock</div>
      <img src="stussy.jpg" alt="Item 3" class="category-image" />
      <div class="category-title">Stussy</div>
      <div class="category-price">$19</div>
      <div class="quantity-sold">Sold: 0</div>
      <div class="button-group">
        <button class="buy-btn" onclick="handlePurchase(this, 'Fruit of the Loom')">Buy</button>
        <button class="add-btn" onclick="window.location.href='shopping basket.html'">Add to Cart</button>
        <button class="restock-btn" onclick="handleRestock('Fruit of the Loom')">Restock</button>
      </div>
    </div>
  </div>

  <script>
    // Initialize item quantities (in a real app, this would come from a database)
    const defaultItemQuantities = {
      'Carrhart': { stock: 5, sold: 0 },
      'Chromehearts': { stock: 3, sold: 0 },
      'Fruit of the Loom': { stock: 8, sold: 0 },
      'Bundles': { stock: 4, sold: 0 }
    };

    // Get or initialize the item quantities from localStorage
    let itemQuantities = JSON.parse(localStorage.getItem('itemQuantities')) || defaultItemQuantities;
    localStorage.setItem('itemQuantities', JSON.stringify(itemQuantities));

    function handlePurchase(button, itemName) {
      const item = itemQuantities[itemName];
      if (item.stock > 0) {
        // Store the current item being purchased
        localStorage.setItem('currentPurchase', itemName);
        
        // Redirect to purchase page
        window.location.href = 'purchase.html';
      }
    }

    function handleRestock(itemName) {
      // Restock the item with default quantity
      const defaultStock = defaultItemQuantities[itemName].stock;
      itemQuantities[itemName].stock = defaultStock;
      
      // Update localStorage
      localStorage.setItem('itemQuantities', JSON.stringify(itemQuantities));
      
      // Update the display
      initializeDisplay();
    }

    function updateItemDisplay(card, item) {
      const quantitySoldDiv = card.querySelector('.quantity-sold');
      const soldStatus = card.querySelector('.sold-status');
      const buyBtn = card.querySelector('.buy-btn');
      const addBtn = card.querySelector('.add-btn');
      const restockBtn = card.querySelector('.restock-btn');

      quantitySoldDiv.textContent = `Sold: ${item.sold}`;
      
      if (item.stock === 0) {
        soldStatus.textContent = 'Sold Out';
        soldStatus.style.backgroundColor = '#ff4444';
        buyBtn.disabled = true;
        addBtn.disabled = true;
        restockBtn.style.display = 'block'; // Show restock button
      } else {
        soldStatus.textContent = `${item.stock} Left`;
        soldStatus.style.backgroundColor = '#333';
        buyBtn.disabled = false;
        addBtn.disabled = false;
        restockBtn.style.display = 'none'; // Hide restock button
      }
    }

    // Initialize the display for all items
    function initializeDisplay() {
      document.querySelectorAll('.category-card').forEach(card => {
        const itemName = card.querySelector('.category-title').textContent;
        const item = itemQuantities[itemName];
        if (item) {
          updateItemDisplay(card, item);
        }
      });
    }

    // Update display when the page loads
    initializeDisplay();

    // Listen for storage changes (in case of purchase completion)
    window.addEventListener('storage', function(e) {
      if (e.key === 'itemQuantities') {
        itemQuantities = JSON.parse(e.newValue);
        initializeDisplay();
      }
    });
  </script>

</body>
</html> 